<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness Tracker - Dashboard</title>
    <!-- Link to the main.css file -->
    <link rel="stylesheet" href="/main.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Dyslexic&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="<%= theme %> <%= fontPref %>">

<% if (messages.success) { %>
    <div class="flash success"><%= messages.success %></div>
<% } %>
<% if (messages.error) { %>
    <div class="flash error"><%= messages.error %></div>
<% } %>    

<!-- Navbar -->
    <nav>
        <div class="hamburger" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>
        
        <ul>
            <li><a href="/" class="nav-link">Home</a></li>
            <li><a href="/dashboard" class="nav-link">Dashboard</a></li>

            <!-- Fitness Dropdown Button -->
            <li class="dropdown">
                <a href="javascript:void(0)" class="dropbtn" onclick="toggleDropdown()">Fitness</a>
                <div class="dropdown-content">
                    <a href="/workout" class="dropdown-item">Generate Workout</a>
                    <a href="/water" class="dropdown-item">Water Tracker</a>
                    <a href="/sleep" class="dropdown-item">Sleep Tracker</a>
                </div>
            </li>

            <li><a href="/faq" class="nav-link">FAQ and Feedback</a></li>
            <li><a href="/settings" class="nav-link">Settings</a></li>

            <!-- User Icon -->
            <% if (user) { %>
                <li class="user-icon">
                    <a href="/profile">
                        <span><%= user.username %></span>
                        <img src="/<%= user.profileIcon || 'avatarblack.png' %>" alt="User Icon" />
                    </a>
                </li>
            <% } else { %>
                <li><a href="/users/login" class="nav-link">Login</a></li>
                <li><a href="/users/register" class="nav-link">Sign Up</a></li>
            <% } %>
        </ul>
    </nav>

    <!-- Main content -->
    <div class="dashboard-container">
        <div class="dashboard-header">
            <h1>Welcome back, <%= user.username %>! ðŸ‘‹</h1>
            <p class="subtitle">Here's your fitness journey at a glance</p>
        </div>

        <div class="dashboard-grid">
            <!-- Sleep Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-moon"></i>
                    <h3>Last Night's Sleep</h3>
                </div>
                <div class="card-content">
                    <div class="metric">
                        <span class="metric-value"><%= sleepLength %></span>
                        <span class="metric-unit">hours</span>
                    </div>
                    <div class="metric-quality">
                        <span class="quality-label">Quality:</span>
                        <span class="quality-value"><%= sleepQuality %></span>
                    </div>
                </div>
            </div>

            <!-- Water Intake Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-tint"></i>
                    <h3>Water Intake</h3>
                </div>
                <div class="card-content">
                    <div class="metric">
                        <span class="metric-value"><%= waterTotal %></span>
                        <span class="metric-unit">/ <%= waterGoal %> ml</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar" style="width: <%= percentage %>%; background-color: <%= progressColor %>;">
                            <span class="progress-text"><%= percentage %>%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-bolt"></i>
                    <h3>Quick Actions</h3>
                </div>
                <div class="card-content">
                    <div class="quick-actions">
                        <a href="/workout" class="action-button">
                            <i class="fas fa-dumbbell"></i>
                            Start Workout
                        </a>
                        <a href="/water" class="action-button">
                            <i class="fas fa-plus"></i>
                            Log Water
                        </a>
                        <a href="/sleep" class="action-button">
                            <i class="fas fa-bed"></i>
                            Log Sleep
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>Fitness Tracker &copy; 2025</p>
    </footer>

    <!-- JavaScript -->
    <script>
        function toggleDropdown() {
            var dropdown = document.querySelector('.dropdown');
            dropdown.classList.toggle('active');
        }

        function toggleMenu() {
            const navList = document.querySelector('nav ul');
            navList.classList.toggle('active');
        }
    </script>
</body>
</html>
